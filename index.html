<!doctype html>
<html lang="vi">
<head>
<meta charset="utf-8">
<title>QR L·ªùi ch√∫c Noel</title>
<meta name="viewport" content="width=device-width,initial-scale=1">
<style>
body{
  margin:0;min-height:100vh;
  display:grid;place-items:center;
  background:radial-gradient(circle at top,#1b2b5a,#0b1020);
  color:#fff;font-family:system-ui
}
.card{
  width:min(520px,92vw);
  background:rgba(255,255,255,.08);
  border-radius:20px;padding:20px;
  box-shadow:0 25px 60px rgba(0,0,0,.6);
  text-align:center
}
textarea{
  width:100%;height:110px;
  border-radius:14px;border:none;
  padding:12px;font-size:15px
}
button{
  margin-top:12px;
  background:#22c55e;border:none;
  padding:12px 20px;border-radius:16px;
  font-size:16px;font-weight:700;cursor:pointer
}
#qr{margin-top:18px}
</style>
</head>
<body>

<div class="card">
  <h2>üéÑ T·∫°o QR l·ªùi ch√∫c Gi√°ng Sinh</h2>

  <textarea id="msg">Ch√∫c b·∫°n Gi√°ng Sinh an l√†nh üéÑ‚ú® v√† nƒÉm m·ªõi nhi·ªÅu may m·∫Øn!</textarea>
  <br>
  <button onclick="makeQR()">T·∫°o QR</button>

  <div id="qr"></div>
</div>

<script src="https://cdn.jsdelivr.net/npm/qrcode/build/qrcode.min.js"></script>
<script>
async function makeQR(){
  const text = document.getElementById("msg").value.trim() 
               || "Ch√∫c b·∫°n Gi√°ng Sinh an l√†nh üéÑ";

  // üî¥ QUAN TR·ªåNG: QR TR·ªé TH·∫≤NG greeting.html
  const url =
    "https://chuthithuylinh2210-arch.github.io/qr-loi-chuc/greeting.html?m="
    + encodeURIComponent(text);

  const qrDiv = document.getElementById("qr");
  qrDiv.innerHTML = "";
  const canvas = document.createElement("canvas");
  qrDiv.appendChild(canvas);

  await QRCode.toCanvas(canvas, url, {
    width: 260,
    margin: 2,
    color: {
      dark: "#22c55e",   // m√†u QR
      light: "#0b1020"
    }
  });

  // üéÑ LOGO C√ÇY TH√îNG GI·ªÆA QR
  const ctx = canvas.getContext("2d");
  const img = new Image();
  img.crossOrigin = "anonymous";
  img.src =
    "https://upload.wikimedia.org/wikipedia/commons/thumb/6/6b/Christmas_tree_icon.svg/512px-Christmas_tree_icon.svg.png";
  img.onload = () => {
    const s = 56;
    ctx.drawImage(img, (canvas.width-s)/2, (canvas.height-s)/2, s, s);
  };
}

makeQR();
</script>
</body>
</html>
